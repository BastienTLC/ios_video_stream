

## Notes:
 doing some of these things on mac will result in the kernel logging:
 "missing entitlement com.apple.ibridge.control" could this be it?
 Seems like there is no real way to do all this on a Mac, on the other hand, you have
 Quicktime there so why would you? :-D

## Steps

run `main.go activate` to do the following stuff for you:
On a Mac you can see QT is changing the device usb config when you open the video mirroring.
That config however is usually missing on the ios device, to make it appear issue the following control transfer to the device:
0000     40 52 00 00 02 00 00 00                           @R......
The device will then disconnect itself, and reconnect with an additional USB config.
USBMUXD usually activates the new config automatically and now it is good to use with two additional bulk endpoints
providing a video stream.




## random observations:

What i can see from the ios qt
0000   00 01 20 00 12 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   cd f9 6a 02 00 00 00 00 00 20 41 14 02 12 80 00   ..j...... A.....
0020   80 06 00 01 00 00 12 00                           ........


0000   00 01 20 01 12 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   cd f9 6a 02 00 00 00 00 00 20 41 14 02 12 80 00   ..j...... A.....
0020   12 01 00 02 00 00 00 40 ac 05 a8 12 06 10 01 02   .......@........
0030   03 05                                             ..

last byte is bnumconfig


libusb normal getActiveConfig Req

0000   00 01 20 00 01 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   e5 b1 8e 02 00 00 00 00 00 20 41 14 02 17 80 00   ......... A.....
0020   80 08 00 00 00 00 01 00                           ........

libusb normal getDeviceDescriptor Req
0000   00 01 20 00 01 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   95 c6 8e 02 00 00 00 00 00 20 41 14 02 17 80 00   ......... A.....
0020   80 08 00 00 00 00 01 00                           ........

doc on control transfers
http://www.jungo.com/st/support/documentation/windriver/802/wdusb_man_mhtml/node55.html

reading about clear feature https://www.beyondlogic.org/usbnutshell/usb6.shtml
seems like clear feature, then 48 bytes ping can be reading

first:
Clear feature req:
0000   00 01 20 00 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   d1 03 6b 02 00 00 00 00 00 20 41 14 02 12 00 00   ..k...... A.....
0020   02 01 00 00 86 00 00 00                           ........

0000   00 01 20 00 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   a3 c0 98 02 00 00 00 00 00 00 20 14 02 0a 00 00   .......... .....
0020   02 01 00 00 86 00 00 00                           ........

0000   00 01 20 00 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   b7 fb 98 02 00 00 00 00 00 00 20 14 02 0a 00 00   .......... .....
0020   02 01 00 00 86 00 00 00                           ........



clear feature res:
0000   00 01 20 01 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   d1 03 6b 02 00 00 00 00 00 20 41 14 02 12 00 00   ..k...... A.....

0000   00 01 20 01 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   a3 c0 98 02 00 00 00 00 00 00 20 14 02 0a 00 00   .......... .....


second:
clear feature req:
0000   00 01 20 00 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   d3 03 6b 02 00 00 00 00 00 20 41 14 02 12 00 00   ..k...... A.....
0020   02 01 00 00 05 00 00 00                           ........

0000   00 01 20 00 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   a5 c0 98 02 00 00 00 00 00 00 20 14 02 0a 00 00   .......... .....
0020   02 01 00 00 05 00 00 00                           ........




clear feature res:
0000   00 01 20 01 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   d3 03 6b 02 00 00 00 00 00 20 41 14 02 12 00 00   ..k...... A.....

0000   00 01 20 01 00 00 00 00 00 00 00 00 00 00 00 00   .. .............
0010   a5 c0 98 02 00 00 00 00 00 00 20 14 02 0a 00 00   .......... .....





then a ping is exchanged:
read:
0020   10 00 00 00 67 6e 69 70 00 00 00 00 01 00 00 00   ....gnip........

0020   10 00 00 00 67 6e 69 70 00 00 00 00 01 00 00 00   ....gnip........

write:
0020   10 00 00 00 67 6e 69 70 01 00 00 00 01 00 00 00   ....gnip........

0020   10 00 00 00 67 6e 69 70 01 00 00 00 01 00 00 00   ....gnip........

